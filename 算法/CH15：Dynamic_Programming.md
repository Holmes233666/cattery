# CH15ï¼šDynamic Programming 



åŠ¨æ€è§„åˆ’ï¼šåˆ†æ²»åº”ç”¨åœ¨ä¼˜åŒ–é—®é¢˜ä¸Š

## 15.1 Optimization Problems

### 15.1.1 åŠ¨æ€è§„åˆ’ä¸DC

åŠ¨æ€è§„åˆ’æ˜¯ä¸€ç§ç®—æ³•è®¾è®¡ç­–ç•¥ï¼Œç±»ä¼¼åˆ†æ²»ã€‚

åŠ¨æ€è§„åˆ’æ˜¯è‡ªä¸‹è€Œä¸Šçš„è®¡ç®—ï¼Œè€Œä¸æ˜¯è‡ªä¸Šè€Œä¸‹çš„è®¡ç®—ã€‚

**bottom up  rather than top down**

### 15.1.2 åŠ¨æ€è§„åˆ’æ±‚è§£é—®é¢˜çš„æ­¥éª¤

åŠ¨æ€è§„åˆ’çš„æ–¹æ³•æœ‰4ä¸ªæ­¥éª¤ï¼š

- åˆ»ç”»é—®é¢˜çš„æœ€ä¼˜è§£çš„ç»“æ„ï¼Œå¦‚ä½•**åˆ©ç”¨å­é—®é¢˜æ±‚è§£çˆ¶é—®é¢˜ã€æœ€ä¼˜å­ç»“æ„æ‰¾å‡ºæ¥ã€‘**

  é—®é¢˜çš„æœ€ä¼˜è§£ä¸€å®šä½¿ç”¨å­é—®é¢˜çš„æœ€ä¼˜è§£

- <u>é€’å½’å®šä¹‰</u>**æœ€ä¼˜è§£çš„å€¼**

  åŒºåˆ†æœ€ä¼˜è§£å’Œæœ€ä¼˜è§£çš„å€¼ï¼ŒåŠ¨æ€è§„åˆ’æ±‚è§£é—®é¢˜æ—¶é€šå¸¸è®¡ç®—çš„æ˜¯æœ€ä¼˜è§£çš„å€¼ï¼Œè€Œä¸æ˜¯æœ€ä¼˜è§£

  **é€’æ¨å¼ä»£è¡¨çš„æ˜¯æœ€ä¼˜è§£çš„å€¼**ï¼Œè¡¨ç¤ºçš„æ˜¯æ€ä¹ˆç”¨å­é—®é¢˜çš„æœ€ä¼˜è§£

- æŒ‰ç…§ä»ä¸‹è‡³ä¸Šçš„æ¨¡å¼æ±‚è§£

  é€’å½’+å¤‡å¿˜å½•   //    è‡ªä¸‹è€Œä¸Šï¼Œè®¡ç®—æ¬¡åºéœ€æ³¨æ„

- é‡æ„æœ€ä¼˜è§£

  æœ€ä¼˜è§£çš„å€¼çŸ¥é“äº†ï¼Œè¿˜éœ€è¦è®¡ç®—æœ€ä¼˜è§£
  
  æ€ä¹ˆæŒ‘ï¼Ÿè¿‡ç¨‹éœ€è¦ä¿å­˜ã€‚

## 15.2 è£…é…çº¿é—®é¢˜ Assembly Line Scheduling

### 15.2.1 èƒŒæ™¯

å·¥å‚ä¸­æœ‰ä¸¤æ¡å¹³è¡Œçš„è£…é…çº¿ï¼Œæ¯æ¡çº¿nä¸ªç«™ï¼š$S_{i,1},S_{i,2},...,S_{i,n}$ï¼Œ$i=1,2$

æ¯ä¸ªç«™$S_{1,i}$å’Œ$S_{2,j}$åšçš„äº‹æƒ…ç›¸åŒï¼Œä½†å¯èƒ½æœ‰ä¸åŒçš„è£…é…æ—¶é—´ï¼š$a_{i,j}$

æ­¤å¤–è‹¥æ˜¯ä»è£…é…çº¿$i$åˆ°è£…é…çº¿$j$ï¼Œéœ€è¦èŠ±è´¹ä¼ é€æ—¶é—´ï¼š$t_{i,j}$   **æµæ°´çº¿å¯ä»¥æ··ç”¨ï¼Œåˆ‡æ¢æµæ°´çº¿éœ€è¦ä»£ä»·**

å¼€å§‹æ—¶æœ‰å‡†å¤‡æ—¶é—´$e_i$å’Œæœ€åçš„ç¦»å¼€æ—¶é—´$x_i$

![image-20220608183942841](https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/image-20220608183942841.png)

å¦‚ä½•é€‰æ‹©è°ƒåº¦ï¼Œæ‰èƒ½è·å¾—æ—¶é—´ä¸Šæœ€çŸ­çš„æœ€ä¼˜è§£ï¼Ÿ

### 15.2.2 ç®—æ³•åˆ†æ

#### ï¼ˆ1ï¼‰åˆ†æ

å¯¹äºå½“å‰ç«™$S_{1,j}$ï¼Œé€‰æ‹©åªæœ‰ä¸¤ç§ï¼š

-  if $j = 1$ï¼Œé‚£ä¹ˆåªæœ‰ä¸€ç§
- å¦‚æœ$j \geq 2$ï¼Œé‚£ä¹ˆï¼š
  - ç›´æ¥ä»$S_{1,j-1}$ç«™åˆ°è¾¾
  - ç”±$S_{2,j-1}$ç«™ä¼ é€’åˆ°$S_{1,j-1}$

<img src="https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/image-20220608184358391.png" alt="image-20220608184358391" style="zoom:50%;" />

![image-20220608184504978](https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/image-20220608184504978.png)

ä¾èµ–äº**æœ€ä¼˜å­ç»“æ„Optimal substructure**ï¼šä¸€ä¸ªé—®é¢˜çš„æœ€ä¼˜è§£ä¸€å®šåŒ…å«å­é—®é¢˜çš„æœ€ä¼˜è§£

#### ï¼ˆ2ï¼‰é€’æ¨å¼

åˆ†ä¸¤ä¸ªçº¿è·¯å†™é€’æ¨å¼ï¼š

- ç«™ç‚¹1ï¼š

$$
f_{1,j} = \begin{cases}a_{1,1} + e_1&& if \ j=1\\
min(f_{1,j-1}+a_{1,j}, f_{2,j-1}+t_{2,j-1}+a_{1,j})&& if \ j\geq2\end{cases}
$$

- ç«™ç‚¹2ï¼š
  $$
  f_{2,j} = \begin{cases}a_{2,1} + e_2&& if \ j=1\\
  min(f_{2,j-1}+a_{2,j}, f_{1,j-1}+t_{1,j-1}+a_{2,j})&& if \ j\geq2\end{cases}
  $$
  

Total Timeï¼š $min\{f_1[n]+x_1, f_2[n]+x2\}$

### 15.2.3 ç®—æ³•å®ç°

#### ï¼ˆ1ï¼‰ç›´æ¥å®ç°

ç›´æ¥æŒ‰ç…§ä¸Šè¿°æ€è·¯ï¼Œå®ç°ç¨‹åºå¦‚ä¸‹ï¼š

```cpp
int fun1(int j) {
	if (j == 1) {
		return t1[0] + a1[1];
	}
	return min(fun2(j-1) + t2[j-1] + a1[j], fun1[j-1] + a1[j]);
}

int fun2(int j) {
	if (j == 1) {
		return t2[0] + a2[1];
	}
	return min(fun1(j-1) + t1[j-1] + a2[j], fun2[j-1] + a2[j]);
}

int main() {
	int time = min(fun1(n) + t1[j], f2(n) + t2[j]);
	return 0;
}
```

ç®—æ³•æ—¶é—´å¤æ‚åº¦ä¸º$T(n) = 2T(n-1) + O(1)$

å«æœ‰å¤§é‡çš„é‡å¤è®¡ç®—çš„è¿‡ç¨‹ï¼Œæ—¶é—´å¤æ‚åº¦ä¸º$O(n^2)$ï¼Œå¯ä»¥ä½¿ç”¨å¤‡å¿˜å½•çš„æ€è·¯ã€‚

#### ï¼ˆ2ï¼‰è‡ªä¸‹è€Œä¸Š

ä»1~nè®¡ç®—ï¼Œéé€’å½’

| j     | 1    | 2    | 3    | 4    | 5    | 6    |
| ----- | ---- | ---- | ---- | ---- | ---- | ---- |
| f1[j] | 9    | 18   | 20   | 24   | 32   | 35   |
| f2[j] | 12   | 16   | 22   | 25   | 30   | 37   |

<img src="https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/image-20220608191009275.png" alt="image-20220608191009275" style="zoom:50%;" />

$f^* = min(35+3, 37+2)$

ç®—æ³•å®ç°ï¼š

<img src="https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/image-20220608191359169.png" alt="image-20220608191359169" style="zoom:50%;" />

ä½¿ç”¨æ•°ç»„$L$è®°å½•æœ¬æ¬¡é€‰æ‹©ã€‚

æ‰“å°ç«™ç‚¹çš„é€‰æ‹©æƒ…å†µï¼š

- æ ˆæ‰“å°
- é€’å½’æ‰“å°

## 15.3 Matrix Chain Product

### 15.3.1 é—®é¢˜èƒŒæ™¯

nä¸ªçŸ©é˜µï¼Œæ¯ä¸ªçŸ©é˜µç»´åº¦å¯èƒ½ä¸åŒï¼Œä¿è¯èƒ½å¤Ÿè¿ä¹˜ï¼Œæ±‚è§£é“¾ä¹˜çš„æœ€å°ä»£ä»·ã€‚

ä»£ä»·çš„å®šä¹‰ï¼šä½¿ç”¨æ ‡é‡ä¹˜æ³•çš„æ¬¡æ•°è¡¨ç¤ºä»£ä»·**scalar multiplications**

- $A_1:p\times q\quad A_2:q\times r$

  é‚£ä¹ˆ$A_1\times A_2$çš„ä»£ä»·ä¸ºï¼š$p\times q\times r$

éæ–¹é˜µï¼Œä¹˜æ³•çš„è®¡ç®—é¡ºåºå¯¼è‡´æœ€åçš„è®¡ç®—é‡ä¸åŒã€‚

<img src="https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/image-20220608192203052.png" alt="image-20220608192203052" style="zoom:50%;" />

- Order1

<img src="https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/image-20220608192745266.png" alt="image-20220608192745266" style="zoom:50%;" />

### 15.3.2 æ±‚è§£

#### 15.3.2.1 æš´åŠ›è§£æ³•

ç©·ä¸¾åŠ æ‹¬å·çš„æ–¹å¼ï¼Œå¤šå°‘ç§åŠ æ‹¬å·æ–¹å¼ï¼Ÿ
![image-20220608192918343](https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/image-20220608192918343.png)

#### 15.3.2.2 åˆ†æ²»

##### ï¼ˆ1ï¼‰åˆ»ç”»æœ€ä¼˜è§£ç»“æ„

è€ƒè™‘å¸¸è§çš„ä¸¤ç§åˆ†æ²»æ–¹æ³•ï¼š

äºŒåˆ†ï¼š

ä¸ä¸€å®šåˆ†æˆä¸­é—´ä¸¤åŠï¼šæœ€ä¼˜è§£ä¸ä¸€å®šç”¨åˆ°å­é—®é¢˜çš„æœ€ä¼˜è§£

næ¨n-1ï¼š

99ä¸ªçŸ¥é“---->100ä¸ªï¼šä¸ä¸€å®šç”¨ç¬¬99ä¸ªçš„æœ€ä¼˜è§£

ä¸Šè¿°ä¸¤ç§æƒ…å†µï¼š**äºŒåˆ†å’Œnæ¨n-1æä¾›çš„éƒ½æ˜¯å­é—®é¢˜çš„ä¸€ç§å¯èƒ½**ï¼Œéœ€è¦åˆ—ä¸¾æ‰€æœ‰çš„å­é—®é¢˜ï¼Œ<font color = "red">**åˆ’åˆ†å¾ˆé‡è¦ï¼Œæ‰€æœ‰çš„åˆ’åˆ†éƒ½è¦åˆ—ä¸¾**</font>ã€‚



![image-20220608193833623](https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/image-20220608193833623.png)

éœ€è¦åˆ—ä¸¾æ‰€æœ‰çš„å¯èƒ½çš„å­é—®é¢˜ï¼šn-1ä¸ªå­é—®é¢˜ï¼ŒåŸé—®é¢˜çš„æœ€ä¼˜è§£ä¸€å®šç”¨çš„æ˜¯n-1ä¸ªå­é—®é¢˜ä¸­çš„ä¸€ä¸ªã€‚

**å­é—®é¢˜å¦‚ä½•æ±‚è§£ï¼šé€’å½’æ±‚è§£ã€‚**

##### ï¼ˆ2ï¼‰é€’å½’å®šä¹‰æœ€ä¼˜è§£çš„å€¼

æœ€ä¼˜è§£ï¼šæ€ä¹ˆåŠ æ‹¬å·

æœ€ä¼˜è§£çš„å€¼ï¼šæœ€å°çš„è®¡ç®—é‡

é¦–å…ˆæè¿°è¯¥é—®é¢˜éœ€è¦å·¦æ‹¬å·ä½ç½®å’Œå³æ‹¬å·ä½ç½®ä¸¤ä¸ªç»´åº¦ï¼Œæ‰€ä»¥è¯¥é€’å½’å¼çš„å…¬å…±æ ·å¼å¿… ç„¶æ˜¯ä¸€ä¸ªäºŒç»´è¡¨è¾¾å¼ï¼Œä¸å¦¨ç”¨ğ‘š[ğ‘–,ğ‘—]è¡¨ç¤ºï¼š 

- å…¶ä¸­ğ‘–æ˜¯å³æ‹¬å·çš„ä½ç½®
- ğ‘—æ˜¯å·¦æ‹¬å·çš„ä½ç½®
- ğ‘š[ğ‘–,ğ‘—]ä¸ºè§„æ¨¡ä¸ºğ‘– âˆ¼ ğ‘—çš„çŸ©é˜µé“¾ä¹˜é—®é¢˜çš„æœ€å°ä»£ä»·å€¼ 

å…¶æ¬¡ï¼Œç»“åˆä¸Šå›¾çš„åŠ æ‹¬å·çš„æ–¹å¼ï¼Œè§„æ¨¡ä¸ºğ‘›æ—¶æ˜¯ä»ğ‘› âˆ’ 1ä¸ªå­é—®é¢˜ä¸­æŒ‘é€‰ã€‚æˆ‘ä»¬å¯ä»¥æ¨å¾—ï¼Œå¯¹äºä»»æ„ä¸€ä¸ªè§„æ¨¡ä¸ºğ‘– âˆ¼ ğ‘—çš„é—®é¢˜ï¼Œå…¶å­é—®é¢˜çš„ä¸ªæ•°ä¸ºğ‘— âˆ’ ğ‘–ä¸ªã€‚ å¯¹åº”çš„å­é—®é¢˜å¯ä»¥æè¿°ä¸ºğ‘– âˆ¼ ğ‘˜ä¸ªçŸ©é˜µä½œä¸ºå­é—®é¢˜è®¡ç®—ï¼Œğ‘˜ + 1 âˆ¼ ğ‘—ä¸ªçŸ©é˜µä½œä¸ºå¦ä¸€ä¸ªå­ é—®é¢˜è®¡ç®—ï¼Œğ‘˜çš„å–å€¼èŒƒå›´åº”è¯¥æ»¡è¶³ğ‘– â‰¤ ğ‘˜ < ğ‘— 

æœ€åï¼Œéœ€è¦æ³¨æ„çˆ¶é—®é¢˜çš„ä»£ä»·ä¸ä»…ä»…æ˜¯ä¸¤ä¸ªå­é—®é¢˜çš„æœ€å°ä»£ä»·ç›¸åŠ ï¼Œè¿˜åŒ…æ‹¬ä¸¤ä¸ªå­é—® é¢˜åˆå¹¶çš„ä»£ä»·ï¼Œä»¥ä»£ä»·æ•°ç»„çš„å½¢å¼æè¿°åˆå¹¶çš„ä»£ä»·å³ä¸ºï¼šğ‘ƒ[ğ‘– âˆ’ 1]ğ‘ƒ[ğ‘˜]ğ‘ƒ[ğ‘—] 

é€’å½’å¼ï¼š
$$
m[i,j] = \min_{i\leq k < j}\{m[i,k] + m[k+1,j] + p[i-1]p[k]p[j]\}
$$

##### ï¼ˆ3ï¼‰è‡ªä¸‹è€Œä¸Šè®¡ç®—

###### â‘ é€’å½’ç®—æ³•

ç»ˆæ­¢æ¡ä»¶ï¼š `i==j`ï¼šå¼€é”€ä¸º0

å› ä¸ºé‡å¤è®¡ç®—å­˜åœ¨ï¼Œæ‰€ä»¥ï¼Œéœ€è¦æ‰“å¤‡å¿˜å½•

å¤‡å¿˜å½•ç»“æœå¦‚ä¸‹ï¼š

```cpp
// é€’å½’å†™æ³•çš„åˆå§‹åŒ–å¤‡å¿˜å½•
void init_memo(vector<vector<int>>& res, vector<int>& p) {
    for(int i = 0; i < p.size(); i++) {
        for(int j = 0; j < p.size(); j++) {
            res[i][j] = 999999;
            res[i][i] = 0;
        }
    }
}

int matrix_chain_product(vector<int>& cost, int start, int end, vector<vector<int>>& choose, vector<vector<int>>& res) {
	if (res[start][end] != 999999) return res[start][end];
	for (int k = start; k < end; k++) {
		int cost1 = matrix_chain_product(cost, start, k, choose, res);
		int cost2 = matrix_chain_product(cost, k+1, end, choose, res);
		res[start][k] = cost1;
		res[k+1][end] = cost2;
		int new_cost = cost1 + cost2 + cost[start-1] * cost[k] * cost[end];
		if (res[start][end] > new_cost) {
			res[start][end] = new_cost;
			choose[start][end] = k;
		}
	}
	return res[start][end];
}
```

###### â‘¡ è‡ªä¸‹è€Œä¸Š

![image-20220608205108715](https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/image-20220608205108715.png)

æ³¨æ„è§„æ¨¡ï¼š

- åˆå§‹åŒ–ï¼ŒçŸ©é˜µè§„æ¨¡ä¸º1æ—¶ï¼Œè®¡ç®—é‡ä¸º0ï¼›è§„æ¨¡ä¸ºå…¶ä»–æ—¶ï¼Œåˆå§‹å°†è®¡ç®—é‡ç½®ä¸ºæ— ç©·
- èµ·å§‹çŸ©é˜µç¡®å®šï¼Œè§„æ¨¡ç¡®å®šï¼Œé‚£ä¹ˆæœ«å°¾çŸ©é˜µç¡®å®š
- åœ¨èµ·å§‹å’Œæœ«å°¾ä¹‹é—´éå†kï¼Œé€‰æ‹©æœ€å°çš„

![image-20220608204526497](https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/image-20220608204526497.png)

ç¨‹åºå®ç°ï¼š

```cpp
// è‡ªä¸‹è€Œä¸Šçš„æ±‚è§£
int matrix_chain_product_down_top(vector<int>& p, int start, int end, vector<vector<int>>& choose, vector<vector<int>>& res) {
	for (int l = 2; l < p.size(); l++) {	// lè¡¨ç¤ºé—®é¢˜çš„è§„æ¨¡ï¼Œæœ€å°çš„è§„æ¨¡ä¸º1ä¸ªçŸ©é˜µï¼Œå·²ç»åˆå§‹åŒ–ï¼Œè¿™é‡Œä»è§„æ¨¡ä¸º2å¼€å§‹ 
		for (int i = 1; i < p.size() - l + 1; i++) {		// æ³¨æ„å¡«çŸ©é˜µé¡ºåº 
			int j = i + l - 1;	// jå®šäº†
			for (int k = i; k < j; k++) {
				int cost = res[i][k] + res[k+1][j] + p[i-1]*p[k]*p[j];
                if(res[i][j] >= cost) {
                    res[i][j] = cost;
                    choose[i][j] = k;
                }
			} 
		} 
	}
	return res[start][end];
}
```

**æ—¶é—´å¤æ‚åº¦æ˜¯$O(n^3)$**

Exampleï¼š

<img src="https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/image-20220608205513191.png" alt="image-20220608205513191" style="zoom:50%;" />

##### ï¼ˆ4ï¼‰é‡æ„æœ€ä¼˜è§£

`p[i,j] = "("  p[i, s[i,j]]   p[s[i,j]+1, j] ")"`

```cpp
// æ‰“å°åŠ æ‹¬å·çš„æ–¹æ³•
void printBracket(vector<vector<int>> s, int i, int j) {
    if(i == j){
        cout << "A" << i;
        return;
    }
    cout << "(";
    printBracket(s, i, s[i][j]);
    printBracket(s, s[i][j]+1, j);
    cout << ")";
}
```

## 15.3 åŠ¨æ€è§„åˆ’åŸç†

æœ€ä¼˜å­ç»“æ„ optimal substructure æ»¡è¶³ï¼šå¯ç”¨DC---->DP

Qï¼š

- æ˜¯å¦ä¸€å®šç”¨å­é—®é¢˜çš„æœ€ä¼˜è§£ï¼Ÿæ€ä¹ˆç”¨ï¼Ÿ
- ç»´æ•°
- æœ€ä¼˜è§£çš„å€¼ï¼šå‡ æŒ‘ä¸€

### 15.3.1 Optimal substructure

ä¸ä¸€å®šèƒ½åº”ç”¨åœ¨æ‰€æœ‰é—®é¢˜ä¸Šï¼Œæœ‰äº›é—®é¢˜åªèƒ½ç©·ä¸¾ï¼šTSP

ä¸æ»¡è¶³æœ€ä¼˜å­ç»“æ„çš„ä¾‹å­ï¼š**æœ€é•¿/çŸ­ç®€å•è·¯å¾„Longest simple path**

ç®€å•è·¯å¾„ï¼šä¸èƒ½ç»•ç¯

## 15.4  Longest Common Subsequence 

å­åºåˆ—ï¼šä¸ä¸€å®šè¿ç»­ï¼Œä½†æ˜¯é¡ºåºä¸€å®š

![image-20220608221251811](https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/image-20220608221251811.png)

### 15.4.1 ç®—æ³•åˆ†æ

æš´åŠ›æ±‚è§£ï¼šé¦–å…ˆæ‰¾åˆ°è¾ƒçŸ­ä¸²çš„æ‰€æœ‰å­åºåˆ—$O(2^m)$ï¼Œç„¶ååœ¨åœ¨è¾ƒé•¿ä¸²ä¸­æ¯”è¾ƒ$O(n)$ï¼Œæ€»æ—¶é—´å¤æ‚åº¦ä¸º$O(n2^m)$

åˆ†æ²»ï¼š

ä¸²å˜çŸ­æ–¹å¼ï¼š

- äºŒåˆ†
- næ¨n-1
- ä¸²æœ«å°¾æ¯”è¾ƒ

$$
\begin{cases}æœ«å°¾ç›¸åŒï¼šæœ€ä¼˜è§£ä¸€å®šä¼šç”¨è¯¥å­—æ¯ï¼Œæœ€ç»ˆè§£ä¸ºå­é—®é¢˜æœ€ä¼˜è§£ + 1\\
æœ«å°¾ä¸åŒï¼šä¸å¯èƒ½ä¸¤ä¸ªå­—æ¯éƒ½ç”¨ï¼Œåªæœ‰ä¸€ä¸ªå¯ç”¨ï¼ŒæŒ‘ä¸€ä¸ªæœ€ä¼˜çš„\end{cases}
$$

é€’å½’å¼ï¼š
$$
c[i,j] = \begin{cases}c[i-1,j-1]+1&& x[i]==y[j]\\
max(c[i-1,j],c[i,j-1])&& x[i]\neq y[j]\end{cases}
$$
è¾¹ç•Œæ¡ä»¶ï¼š

$j==0æˆ–i==0$ï¼ŒæŸä¸€ä¸²ä¸ºç©ºï¼Œé‚£ä¹ˆæœ€é•¿å…¬å…±å­åºåˆ—é•¿åº¦ä¸º0

### 15.4.2 ç®—æ³•å®ç°

#### ï¼ˆ1ï¼‰ç›´æ¥å®ç°

æ—¶é—´å¤æ‚åº¦è¾ƒé«˜ï¼Œé‡å¤å­é—®é¢˜

```cpp
// é€’å½’-æ— å¤‡å¿˜å½•
int LCS_recursive(string& x, string& y, int i, int j) {
	if (j == -1 || i == -1) {
		return 0;
	}
	if (x[i] == y[j]) return LCS_recursive(x, y, i-1, j-1) + 1;
	return max(LCS_recursive(x, y, i-1, j), LCS_recursive(x, y, i, j-1));
} 

```



![image-20220608222356997](https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/image-20220608222356997.png)

#### ï¼ˆ2ï¼‰é€’å½’+å¤‡å¿˜å½•

```cpp
/** é€’å½’å†™æ³•ï¼Œå¸¦å¤‡å¿˜å½• **/
int recursive_LCS_Memoization(string& x, string& y, int i, int j, vector<vector<int>>& res, vector<vector<string>>& s) {
    if(res[i+1][j+1] != -999999) {   // è‡ªå·±ä¸ä¸ºç©ºï¼Œé‚£ä¹ˆç›´æ¥è¿”å›å³å¯ã€‚
        return res[i+1][j+1];
    }
    if(x[i] == y[j]) {
        int num = recursive_LCS_Memoization(x, y, i - 1, j - 1, res, s);
        res[i+1][j+1] = num + 1;
    }else{
        int num1 = recursive_LCS_Memoization(x, y, i-1, j, res, s);
        int num2 = recursive_LCS_Memoization(x, y, i, j-1, res, s);
        res[i+1][j+1] = max(num1, num2);
    }
    return res[i+1][j+1];
}

/* å¤‡å¿˜å½•çš„åˆå§‹åŒ– */ 
void init_memoization(vector<vector<int>>& res, string& x, string& y) {
    // ç¬¬0è¡Œå’Œç¬¬0åˆ—åˆå§‹åŒ–ä¸º0
    for(int i = 0; i < x.length() + 1; i++) {
        res[i][0] = 0;
    }
    for(int j = 0; j < y.length() + 1; j++) {
        res[0][j] = 0;
    }
    // å…¶ä»–å€¼åˆå§‹åŒ–ä¸º-999999
    for(int i = 1; i < x.length() + 1; i++) {
        for(int j = 1; j < y.length() + 1; j++) {
            res[i][j] = -999999;
        }
    }
}
```

#### ï¼ˆ3ï¼‰è‡ªä¸‹è€Œä¸Š

```cpp
/** é€’å½’å†™æ³•ï¼Œå¸¦å¤‡å¿˜å½• **/
int recursive_LCS_Memoization(string& x, string& y, int i, int j, vector<vector<int>>& res, vector<vector<string>>& s) {
    if(res[i+1][j+1] != -999999) {   // è‡ªå·±ä¸ä¸ºç©ºï¼Œé‚£ä¹ˆç›´æ¥è¿”å›å³å¯ã€‚
        return res[i+1][j+1];
    }
    if(x[i] == y[j]) {
        int num = recursive_LCS_Memoization(x, y, i - 1, j - 1, res, s);
        res[i+1][j+1] = num + 1;
    }else{
        int num1 = recursive_LCS_Memoization(x, y, i-1, j, res, s);
        int num2 = recursive_LCS_Memoization(x, y, i, j-1, res, s);
        res[i+1][j+1] = max(num1, num2);
    }
    return res[i+1][j+1];
}

/* å¤‡å¿˜å½•çš„åˆå§‹åŒ– */ 
void init_memoization(vector<vector<int>>& res, string& x, string& y) {
    // ç¬¬0è¡Œå’Œç¬¬0åˆ—åˆå§‹åŒ–ä¸º0
    for(int i = 0; i < x.length() + 1; i++) {
        res[i][0] = 0;
    }
    for(int j = 0; j < y.length() + 1; j++) {
        res[0][j] = 0;
    }
    // å…¶ä»–å€¼åˆå§‹åŒ–ä¸º-999999
    for(int i = 1; i < x.length() + 1; i++) {
        for(int j = 1; j < y.length() + 1; j++) {
            res[i][j] = -999999;
        }
    }
}
```

## 15.5 æœ€å¤§å­æ•°ç»„å’Œ

æ¼æ‰ä¸èƒ½é€’å½’ï¼Œæ˜¯ä¸æ„¿çœ‹åˆ°çš„ã€‚

æ”¹å˜å»ºæ¨¡æ–¹å¼ï¼šä»¥$a_k$ç»“å°¾çš„æœ€å¤§å’Œå­æ•°ç»„

$b[j] = max(b[j-1]+a[j], a[j])$

å­é—®é¢˜æ˜¯ä¸æ˜¯æ­£æ•°ï¼Ÿæ­£æ•°å°±åŠ 

![image-20220608230647820](https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/image-20220608230647820.png)
