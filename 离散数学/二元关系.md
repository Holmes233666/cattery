# 二元关系

## 1. 序偶和笛卡尔乘积

### 1.1 序偶

定义：由两个元素<u>按照一定的次序</u>组成的二元组称为**序偶**，记做$<x,y>$，其中**$x$是第一元素，$y$是第二元素**。【顺序很重要】

由定义可见，两个序偶$<a,b>=<c,d>$当且仅当$a=c,b=d$

<img src="https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/1ff4cca0b515b04787e5056b5ba2e5aa-image-20220814200359410-b15ce5.png" alt="image-20220814200359410" style="zoom: 50%;" />

### 1.2 笛卡尔乘积

#### 1.2.1 定义

定义：设A，B是两个集合，称集合$A\times B=\{<x, y>|(x\in A) \land (y\in B)\}$为集合A与B的笛卡尔乘积。

<img src="https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/ea772740a52204288d1ebf73cc9705ec-image-20220814200637125-f4a751.png" alt="image-20220814200637125" style="zoom: 50%;" />

#### 1.2.2 性质

- 笛卡尔积**不满足交换律**
- $A\times B=\empty$当且仅当$A=\empty$或者$B=\empty$
- 设A，B，C是任意三个集合，则不一定有$A\times(B\times C) = (A\times B)\times C$，即**笛卡尔积不满足结合律**
- 当A，B都是有限集合时，$|A\times B| = |B\times A| =|A|\times B$
- 笛卡尔积对**并运算和交运算满足分配律**

### 1.3 推广

定义：

- 由n个元素$a_1,a_2,...,a_n$按照一定的次序组成的n元组称为n重有序组，记做$<a_1,a_2,...,a_n>$，其中$a_1$是第一个元素，$a_2$是第二个元素，……，$a_n$是第n个元素。

- 设$A_1,A_2,...,A_n$是n个集合，称集合

  $A_1\times A_2\times ……\times A_n=\{<a_1,a_2,...,a_n>|a_i\in A_i,i=1,2,3,...,n\}$为集合$A_1, A_2,...,A_n$的笛卡尔积。当$A_1=A_2=...=A_n=A$时，可记$A_1\times A_2\times …… \times A_n=A^n$

  <img src="https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/b8af1429b41e9e472c3e3dacd71c8d95-image-20220814201519268-3f0417.png" alt="image-20220814201519268" style="zoom: 80%;" />

## 2. 关系的定义

### 2.1 二元关系定义

设A, B为两个非空集合，称$A \times B$的**任意子集R**为**从A到B的一个二元关系**，简称关系(relation)。其中，A称为关系R的**前域**，B称为关系R的**后域**。如果$A=B$，则称R为A上的一个二元关系。

<img src="https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/9ea802062ebe507ac8bec4860be16c1e-image-20220814201725348-29787f.png" alt="image-20220814201725348" style="zoom:50%;" />

<img src="https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/627b2072841db17d0d0173e583f34546-image-20220814202100184-d1320e.png" alt="image-20220814202100184" style="zoom:50%;" />

几种重要的关系：

- 当$R=\empty$时，称R为从A到B的**空关系(empty relation)** ;
- 当$R=A\times B$时，称R为从A到B的**全关系(total relation)** ; A上的全关系通常记为$E_A$。
- 当$R=I_A=\{<x,x>|x∈A\}$时，称R为A上的**恒等关系(identity relation)**。

有限集合的二元关系的数量：

当集合A，B都是有限集时, $A\times B$共有$|A|\times |B|$ 个不同的元素，这些元素将会产生$2^{|A|\times |B|}$ 个不同的子集。即，==从A到B的不同关系共有$2^{|A|\times |B|}$个==。

### 2.2 定义域和值域

定义：设R是从A到B的二元关系，则A为关系R的**前域**，B为关系R的**后域**。

令：$C= \{x|x∈A,\exists y∈B,< x,y>∈R\}$ , $D=\{y|y∈B,\exists  x∈A, <x,y>∈R\}$。

称C为R的定义域(domain)，记为$C= domR$；D为R的值域(range)，记为$D= ranR$；

*fld*R = $domR∪ranR$为**R的域**( field)。

![image-20220814202217808](https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/afc436d68836559846f08a2f8eadec23-image-20220814202217808-76bc41.png)

<img src="https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/845a2839a70ba470032eca2cd7296d63-image-20220814203614358-7755ee.png" alt="image-20220814203614358" style="zoom:80%;" />

### 2.3 n元关系

<img src="https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/7cd3a128ccef6dc0714da789ff2e825e-image-20220814203711584-e81956.png" alt="image-20220814203711584" style="zoom:80%;" />

## 3. 关系的表示

### 3.1 集合表示法

关系是一种特殊的集合，因此集合的两种基本表示法(枚举法和叙述法) ，可以用到关系的表示中。

- 枚举法
- 叙述法
- 图示法

<img src="https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/849d36d2c685821d7f7544062d22715f-image-20220814203835870-e1eca9.png" alt="image-20220814203835870" style="zoom:50%;" />

### 3.2 关系图表示法

- $A\neq B$

<img src="https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/ad35a4067653bbb3e067708ed744bd0b-image-20220814203929328-b4de49.png" alt="image-20220814203929328" style="zoom:67%;" />

- $A=B$

  <img src="https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/0719b31313a8eb19a40064e6ea3836da-image-20220814204037751-84d1a7.png" alt="image-20220814204037751" style="zoom:67%;" />

### 3.3 关系矩阵法

关系运算用上述的两种方式进行较为困难，使用关系矩阵比较简便。

定义：设$A= \{a_1,a_2, ... ,a_n\}, B= \{b_1,b_2,... ,b_m\}$，R是从A到B的一个二元关系，称矩阵$M_R = (m_{ij})_{n\times m}$ 为关系R的关系矩阵(relation matrix) ,其中:$\begin{cases}1\  < a_i,b_j>∈R\\0\ <a_i,b_j>\notin R\end{cases}(1≤i≤m,1≤j≤n)$又称$M_R$为R的邻接矩阵(adjacency matrix)。

<img src="https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/0e2e50c847a7ce74998e85d74d75e0bd-image-20220814204715231-693814.png" alt="image-20220814204715231" style="zoom:50%;" />

### 3.4 布尔矩阵的运算

#### 3.4.1 布尔矩阵的交和并

<img src="https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/b572d81c938e553604e21ad60300e64f-image-20220814205437966-a98a8c.png" alt="image-20220814205437966" style="zoom:67%;" />

#### 3.4.2 布尔矩阵的积运算

![image-20220814210011358](https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/3a928c455d97ad3adbf97785a5cef9b7-image-20220814210011358-a7b4ef.png)

## 4. 关系的运算

### 4.1 关系的并交差补运算

关系是一种**特殊的集合**，因此集合的所有基本运算(并、交、差、补)，都可以应用到关系中，并且同样满足集合的所有运算定律。

<img src="https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/1c67f9cdfd89a909415bd1d6e138ee4a-image-20220814210201198-a627c7.png" alt="image-20220814210201198" style="zoom:50%;" />

<img src="https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/49b9ce3036883d054f1d14ab3c7970a6-image-20220814210247901-ee5f4a.png" alt="image-20220814210247901" style="zoom:50%;" />

### 4.2 关系的复合运算

定义：设A，B，C是3三个集合，R是从A到B的关系，S是从B到C的关系(即$R：A→B,S：B→C$)，则R与S的复合关系(合成关系）(composite relation)RoS是从A到C的关系，并且: $R o S=\{<x,z>|(x∈A)\land (z∈C)\land (\exists y)(y∈B\land xRy\land ySz)\}$。运算"o"称为复合运算(composite operation)。——R的后域是S的前域

<img src="https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/699d8601aa4f5ec4013cac73aca1a649-image-20220814211242748-d6432f.png" alt="image-20220814211242748" style="zoom:80%;" />

<img src="https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/2cef0242cd7b9831d7105673c20261d2-image-20220814211426163-ccee95.png" alt="image-20220814211426163" style="zoom:80%;" />

### 4.3 逆运算

定义：设A，B是两个集合，R是A到B的关系，则从B到A的关系$R^{-1}=\{<b,a>|<a,b>∈R\}$称为R的逆关系(inverse relation) ,运算“-1” 称为逆运算(inverse operation)。

- $(R^{-1})^{-1}=R$
- $\O^{-1}=\O$
- $(A\times B)^{-1}=B\times A$

求逆运算在三种表示法中的体现：

<img src="https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/5f80c427f709ef04c9e5c0e365861778-image-20220814211956860-58c285.png" alt="image-20220814211956860" style="zoom:50%;" />

## 5. 关系的运算定律

### 5.1 复合运算性质

设A、B、C和D是任意四个集合，R、S和T分别是从A到B，B到C和C到D的二元关系，$I_A$和$I_B$分别是A和B上的恒等关系，则

![image-20220814213240929](https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/64fa0e4b81e53951a1785e44dd2f253c-image-20220814213240929-32f602.png)

证明方法：

证明两个关系相等，即证明两个集合相等；证明两个集合相等，也即证明两个集合相互包含。

![image-20220814213353054](https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/f224dd43ebdc7c5c51744511e4d0b5f6-image-20220814213353054-3ed12f.png)

以结合律为例，证明两个集合相等：

<img src="https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/8657e314781230faaca3b3cc91a1ab8f-image-20220814213549524-bf11dc.png" alt="image-20220814213549524" style="zoom:67%;" />

<img src="https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/55ff97c116c1afb5dd657bf7a4536565-image-20220814213722154-488b05.png" alt="image-20220814213722154" style="zoom:67%;" />

- 分配律

![image-20220814213826962](https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/4ece781ca01baecad3bc272fcabc0d43-image-20220814213826962-c0ed6a.png)

### 5.2 逆运算的运算定律

设A，B，C是三个集合，R, S分别是从A到B和从B到C的关系，则有：
$$
(R\circ S)^{-1}=S^{-1}\circ R^{-1}
$$
![image-20220814215230410](https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/5c35e1ba0410ec784f80e4d2ad4737b3-image-20220814215230410-728444.png)

![image-20220814215340602](https://cdn.jsdelivr.net/gh/Holmes233666/blogImage@main/img/2022/08/14/e84301a7f076004e12516f8b1599d754-image-20220814215340602-7f6d1d.png)